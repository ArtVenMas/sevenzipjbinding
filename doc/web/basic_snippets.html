<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta name="verify-v1" content="mCmiZMVFK9OR5rFvabIsFhsHCfxvP4vfF5pvGSCjHOg=" />
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Welcome to 7-Zip-JBinding project</title>
<link href="styles.css" rel="stylesheet" type="text/css">
</head>

<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://sourceforge.net/apps/piwik/sevenzipjbind/" : "http://sourceforge.net/apps/piwik/sevenzipjbind/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
piwik_action_name = '';
piwik_idsite = 1;
piwik_url = pkBaseURL + "piwik.php";
piwik_log(piwik_action_name, piwik_idsite, piwik_url);
</script>
<object><noscript><p><img src="http://sourceforge.net/apps/piwik/sevenzipjbind/piwik.php?idsite=1" alt="piwik"/></p></noscript></object>
<!-- End Piwik Tag -->

<body>
<center>
<table><tr><td width=1000>
<a href="http://sourceforge.net/donate/index.php?group_id=210915"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="Support This Project" /></a>
<a href="http://sourceforge.net"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=210915&amp;type=2" width="125" height="37" border="0" alt="SourceForge.net Logo" /></a>
<!--&nbsp;<font size="+1">7-Zip-JBinding</font><br> -->

<table border="0" width="100%">
<tr><td><td align="center"><img src="logo2.png" />
<tr height="50">
<tr><td width="240" valign="top" class="menu">
<table class="menu" border="0">
<tr><td><a href="index.html">Home</a>
<tr><td><a href="first_steps.html">Documentation</a><br>
<table class="submenu" border="0">
	<tr><td><a href="first_steps.html" >First steps</a>
	<tr><td><a href="basic_snippets.html" class="submenu">Code snippets</a>
	<tr><td><a href="javadoc/index.html" class="submenu">JavaDoc</a>
<!--	<tr><td><a href="http://sevenzipjbind.wiki.sourceforge.net/CompileUnderWindowsMinGW" class="submenu">Compiling under MinGW</a>-->
</table>
<tr><td><a href="http://sourceforge.net/project/showfiles.php?group_id=210915" class="menu">Download</a>
<tr><td><a href="http://sourceforge.net/forum/?group_id=210915" class="menu">Forum</a>
<tr><td><a href="http://sourceforge.net/tracker/?group_id=210915" class="menu">Tracker</a>
<tr><td><a href="http://sourceforge.net/donate/index.php?group_id=210915" class="menu">Donate Money to 7-Zip-JBinding</a>
</table>
<td>
<!--
<h1>Coming very soon!</h1>
<h3>I expect to put a lot of examples here in one or two weeks.</h3>
<h3>Thank you for your patience!</h3>
-->
<h2>Overview</h2>
<p>
Here you can find many simple code snippets, example of how to preform basic operations with
7-Zip-JBinding. All outputs of the code snippets were produced using a single test archive 
<a href="fixme"><span class="filename">simple.zip (FIXME)</span></a>. Here is a content of the test archive:
</p>
<div class="fragment"><pre class="fragment">
$ 7z l simple.zip
7-Zip  4.58 beta  Copyright (c) 1999-2008 Igor Pavlov  2008-05-05
p7zip Version 4.58 (locale=en_US.UTF-8,Utf16=on,HugeFiles=on,2 CPUs)
Listing archive: simple.zip
   Date      Time    Attr         Size   Compressed  Name
------------------- ----- ------------ ------------  ------------------------
2009-08-04 12:26:16 .....         4481           68  file1.txt
2009-08-04 12:27:34 .....           75           62  file2.txt
2009-08-04 14:53:06 D....            0            0  folder
2009-08-04 14:53:40 .....            6            6  folder/file in folder.txt
------------------- ----- ------------ ------------  ------------------------
                                  4562          136  3 files, 1 folders
</pre></div>
<br>
<h2>Standard vs Simple interface</h2>
<p>
The 7-Zip-JBinding library offers two different interfaces: standard and simple. The standard interface 
directly maps all native 7-Zip library methods providing C++ like interface. The simple interface is a
try to provide more Java-like easy to use interface. It was designed either for quick coding and easy
start and not for feature richness nor for performance.
</p>
<p>
The following examples will be presented in both standard and simple interface beginning with as simple interface.
Please note, that the full performance can only be reached with the standard interface.
</p>
<br>
<h2>Quering items in archive</h2>
<h3>Simple interface</h3>
<p>
This example shows how to print a list of items of archive using simple interface.
</p>
<div class="fragment"><pre class="fragment">
<span class="java-keyword">import</span> java.io.IOException;
<span class="java-keyword">import</span> java.io.RandomAccessFile;

<span class="java-keyword">import</span> net.sf.sevenzipjbinding.ISevenZipInArchive;
<span class="java-keyword">import</span> net.sf.sevenzipjbinding.SevenZip;
<span class="java-keyword">import</span> net.sf.sevenzipjbinding.SevenZipException;
<span class="java-keyword">import</span> net.sf.sevenzipjbinding.impl.RandomAccessFileInStream;
<span class="java-keyword">import</span> net.sf.sevenzipjbinding.simple.ISimpleInArchive;
<span class="java-keyword">import</span> net.sf.sevenzipjbinding.simple.ISimpleInArchiveItem;

<span class="java-keyword">public</span> <span class="java-keyword">class</span> ListItemsSimple {
    <span class="java-keyword">public</span> <span class="java-keyword">static</span> <span class="java-keyword">void</span> main(String[] args) {
        <span class="java-keyword">if</span> (args.<span class="java-field">length</span> == 0) {
            System.<span class="java-staticfield">out</span>.println(<span class="java-string">"Usage: java ListItemsSimple &#60;archive-name&#62;"</span>);
        }
        RandomAccessFile randomAccessFile = <span class="java-keyword">null</span>;
        ISevenZipInArchive inArchive = <span class="java-keyword">null</span>;
        <span class="java-keyword">try</span> {
            randomAccessFile = <span class="java-keyword">new</span> RandomAccessFile(args[0], <span class="java-string">"r"</span>);
            inArchive = SevenZip.<span class="java-staticmethod">openInArchive</span>(<span class="java-keyword">null</span>, <span class="java-comment">// autodetect archive type</span>
                    <span class="java-keyword">new</span> RandomAccessFileInStream(randomAccessFile));

            <span class="java-comment">// Getting simple interface of the archive inArchive</span>
            ISimpleInArchive simpleInArchive = inArchive.getSimpleInterface();

            System.<span class="java-staticfield">out</span>.println(<span class="java-string">"   Size   | Compr.Sz. | Filename"</span>);
            System.<span class="java-staticfield">out</span>.println(<span class="java-string">"----------+-----------+---------"</span>);

            <span class="java-keyword">for</span> (ISimpleInArchiveItem item : simpleInArchive.getArchiveItems()) {
                System.<span class="java-staticfield">out</span>.println(String.format(<span class="java-string">"%9s | %9s | %s"</span>, <span class="java-comment">// </span>
                        item.getSize(), 
                        item.getPackedSize(), 
                        item.getPath()));
            }
        } <span class="java-keyword">catch</span> (Exception e) {
            System.<span class="java-staticfield">err</span>.println(<span class="java-string">"Error occurs: "</span> + e);
            System.<span class="java-staticmethod">exit</span>(1);
        } <span class="java-keyword">finally</span> {
            <span class="java-keyword">if</span> (inArchive != <span class="java-keyword">null</span>) {
                <span class="java-keyword">try</span> {
                    inArchive.close();
                } <span class="java-keyword">catch</span> (SevenZipException e) {
                    System.<span class="java-staticfield">err</span>.println(<span class="java-string">"Error closing archive: "</span> + e);
                }
            }
            <span class="java-keyword">if</span> (randomAccessFile != <span class="java-keyword">null</span>) {
                <span class="java-keyword">try</span> {
                    randomAccessFile.close();
                } <span class="java-keyword">catch</span> (IOException e) {
                    System.<span class="java-staticfield">err</span>.println(<span class="java-string">"Error closing file: "</span> + e);
                }
            }
        }
    }
}
</pre></div>
<div class="snippet-info"><a href="snippets/ListItemsSimple.java">download java code</a></div>
<p>
The output for the test archive:
</p>
<div class="fragment"><pre class="fragment">
   Size   | Compr.Sz. | Filename
----------+-----------+---------
     4481 |        68 | file1.txt
       75 |        62 | file2.txt
        0 |         0 | folder
        6 |         6 | folder/file in folder.txt
</pre></div>
<p>
Please note, that not all archive formats support the "folder" items, like "folder/" in our example. Also
please note, that packed size in this example as almost all other properties can return null. A returned null
value means, that either the property is not supported by the particular archive format or not known
for the particular item.
</p>
<h3>Standard interface</h3>
<p>
This example shows how to print a list of items of archive using standard interface.
</p>
<div class="fragment"><pre class="fragment">
<span class="java-keyword">import</span> java.io.IOException;
<span class="java-keyword">import</span> java.io.RandomAccessFile;

<span class="java-keyword">import</span> net.sf.sevenzipjbinding.ISevenZipInArchive;
<span class="java-keyword">import</span> net.sf.sevenzipjbinding.PropID;
<span class="java-keyword">import</span> net.sf.sevenzipjbinding.SevenZip;
<span class="java-keyword">import</span> net.sf.sevenzipjbinding.SevenZipException;
<span class="java-keyword">import</span> net.sf.sevenzipjbinding.impl.RandomAccessFileInStream;

<span class="java-keyword">public</span> <span class="java-keyword">class</span> ListItemsStandard {
    <span class="java-keyword">public</span> <span class="java-keyword">static</span> <span class="java-keyword">void</span> main(String[] args) {
        <span class="java-keyword">if</span> (args.<span class="java-field">length</span> == 0) {
            System.<span class="java-staticfield">out</span>.println(<span class="java-string">"Usage: java ListItemsStandard &#60;archive-name&#62;"</span>);
        }
        RandomAccessFile randomAccessFile = <span class="java-keyword">null</span>;
        ISevenZipInArchive inArchive = <span class="java-keyword">null</span>;
        <span class="java-keyword">try</span> {
            randomAccessFile = <span class="java-keyword">new</span> RandomAccessFile(args[0], <span class="java-string">"r"</span>);
            inArchive = SevenZip.<span class="java-staticmethod">openInArchive</span>(<span class="java-keyword">null</span>, <span class="java-comment">// autodetect archive type</span>
                    <span class="java-keyword">new</span> RandomAccessFileInStream(randomAccessFile));

            System.<span class="java-staticfield">out</span>.println(<span class="java-string">"   Size   | Compr.Sz. | Filename"</span>);
            System.<span class="java-staticfield">out</span>.println(<span class="java-string">"----------+-----------+---------"</span>);
            <span class="java-keyword">int</span> itemCount = inArchive.getNumberOfItems();
            <span class="java-keyword">for</span> (<span class="java-keyword">int</span> i = 0; i &#60; itemCount; i++) {
                System.<span class="java-staticfield">out</span>.println(String.format(<span class="java-string">"%9s | %9s | %s"</span>, <span class="java-comment">// </span>
                        inArchive.getProperty(i, PropID.SIZE), 
                        inArchive.getProperty(i, PropID.PACKED_SIZE), 
                        inArchive.getProperty(i, PropID.PATH)));
            }
        } <span class="java-keyword">catch</span> (Exception e) {
            System.<span class="java-staticfield">err</span>.println(<span class="java-string">"Error occurs: "</span> + e);
            System.<span class="java-staticmethod">exit</span>(1);
        } <span class="java-keyword">finally</span> {
            <span class="java-keyword">if</span> (inArchive != <span class="java-keyword">null</span>) {
                <span class="java-keyword">try</span> {
                    inArchive.close();
                } <span class="java-keyword">catch</span> (SevenZipException e) {
                    System.<span class="java-staticfield">err</span>.println(<span class="java-string">"Error closing archive: "</span> + e);
                }
            }
            <span class="java-keyword">if</span> (randomAccessFile != <span class="java-keyword">null</span>) {
                <span class="java-keyword">try</span> {
                    randomAccessFile.close();
                } <span class="java-keyword">catch</span> (IOException e) {
                    System.<span class="java-staticfield">err</span>.println(<span class="java-string">"Error closing file: "</span> + e);
                }
            }
        }
    }
}
</pre></div>
<div class="snippet-info"><a href="snippets/ListItemsStandard.java">download java code</a></div>
<p>
The output for the test archive is the same:
</p>
<div class="fragment"><pre class="fragment">
   Size   | Compr.Sz. | Filename
----------+-----------+---------
     4481 |        68 | file1.txt
       75 |        62 | file2.txt
        0 |         0 | folder
        6 |         6 | folder/file in folder.txt
</pre></div>
<h2>Extraction of a single file</h2>
<p>
This section will show how to access the compressed data of the archive items. The following examples will calculate a simple checksum
of each archive item.
</p>
<h3>Standard interface</h3>
<p>
This example shows how to get content of the items of the archive using standard interface to calculate a simple checksum.
</p>
<div class="fragment"><pre class="fragment">
<span class="java-keyword">import</span> java.io.IOException;
<span class="java-keyword">import</span> java.io.RandomAccessFile;
<span class="java-keyword">import</span> java.util.Arrays;

<span class="java-keyword">import</span> net.sf.sevenzipjbinding.ISequentialOutStream;
<span class="java-keyword">import</span> net.sf.sevenzipjbinding.ISevenZipInArchive;
<span class="java-keyword">import</span> net.sf.sevenzipjbinding.SevenZip;
<span class="java-keyword">import</span> net.sf.sevenzipjbinding.SevenZipException;
<span class="java-keyword">import</span> net.sf.sevenzipjbinding.impl.RandomAccessFileInStream;
<span class="java-keyword">import</span> net.sf.sevenzipjbinding.simple.ISimpleInArchive;
<span class="java-keyword">import</span> net.sf.sevenzipjbinding.simple.ISimpleInArchiveItem;

<span class="java-keyword">public</span> <span class="java-keyword">class</span> ExtractItemsSimple {
    <span class="java-keyword">public</span> <span class="java-keyword">static</span> <span class="java-keyword">void</span> main(String[] args) {
        <span class="java-keyword">if</span> (args.<span class="java-field">length</span> == 0) {
            System.<span class="java-staticfield">out</span>.println(<span class="java-string">"Usage: java ExtractItemsSimple &#60;archive-name&#62;"</span>);
        }
        RandomAccessFile randomAccessFile = <span class="java-keyword">null</span>;
        ISevenZipInArchive inArchive = <span class="java-keyword">null</span>;
        <span class="java-keyword">try</span> {
            randomAccessFile = <span class="java-keyword">new</span> RandomAccessFile(args[0], <span class="java-string">"r"</span>);
            inArchive = SevenZip.<span class="java-staticmethod">openInArchive</span>(<span class="java-keyword">null</span>, <span class="java-comment">// autodetect archive type</span>
                    <span class="java-keyword">new</span> RandomAccessFileInStream(randomAccessFile));

            <span class="java-comment">// Getting simple interface of the archive inArchive</span>
            ISimpleInArchive simpleInArchive = inArchive.getSimpleInterface();

            System.<span class="java-staticfield">out</span>.println(<span class="java-string">"   Hash   | Filename"</span>);
            System.<span class="java-staticfield">out</span>.println(<span class="java-string">"----------+---------"</span>);

            <span class="java-keyword">for</span> (ISimpleInArchiveItem item : simpleInArchive.getArchiveItems()) {
                final <span class="java-keyword">int</span>[] hash = <span class="java-keyword">new</span> <span class="java-keyword">int</span>[] { 0 };
                <span class="java-keyword">if</span> (!item.isFolder()) {
                    item.extractSlow(<span class="java-keyword">new</span> ISequentialOutStream() {
                        <span class="java-keyword">public</span> <span class="java-keyword">int</span> write(byte[] data) <span class="java-keyword">throws</span> SevenZipException {
                            hash[0] |= Arrays.hashCode(data);
                            <span class="java-keyword">return</span> data.length; <span class="java-comment">// Return amount of proceed data</span>
                        }
                    });
                    System.<span class="java-staticfield">out</span>.println(String.format(<span class="java-string">"%9X | %s"</span>, <span class="java-comment">// </span>
                            hash[0], item.getPath()));
                }
            }
        } <span class="java-keyword">catch</span> (Exception e) {
            System.<span class="java-staticfield">err</span>.println(<span class="java-string">"Error occurs: "</span> + e);
            System.<span class="java-staticmethod">exit</span>(1);
        } <span class="java-keyword">finally</span> {
            <span class="java-keyword">if</span> (inArchive != <span class="java-keyword">null</span>) {
                <span class="java-keyword">try</span> {
                    inArchive.close();
                } <span class="java-keyword">catch</span> (SevenZipException e) {
                    System.<span class="java-staticfield">err</span>.println(<span class="java-string">"Error closing archive: "</span> + e);
                }
            }
            <span class="java-keyword">if</span> (randomAccessFile != <span class="java-keyword">null</span>) {
                <span class="java-keyword">try</span> {
                    randomAccessFile.close();
                } <span class="java-keyword">catch</span> (IOException e) {
                    System.<span class="java-staticfield">err</span>.println(<span class="java-string">"Error closing file: "</span> + e);
                }
            }
        }
    }
}
</pre></div>
<div class="snippet-info"><a href="snippets/ExtractItemsSimple.java">download java code</a></div>
 
<p>
Here is the output of the last snippet:
</p>
<div class="fragment"><pre class="fragment">
   Hash   | Filename
----------+---------
 C1FD1029 | file1.txt
 8CB12E6A | file2.txt
 E8EEC7F4 | folder/file in folder.txt
</pre></div>
 
 
 
 
 
 
 
 
 
 
<!--
Extract first item of the archive and print it:
<div class="fragment"><pre class="fragment">
ISevenZipInArchive archive 
        = SevenZip.<i>openInArchive</i>(ArchiveFormat.<i>SEVEN_ZIP</i>,
                <b>new</b> RandomAccessFileInStream(<b>new</b> RandomAccessFile(
                <b>new</b> File(<font color="blue">"archive.7z"</font>), "r")));
<b>final</b> StringBuilder stringBuilder = <b>new</b> StringBuilder();
archive.extractSlow(0, <b>new</b> ISequentialOutStream() {
    <font color="#646464">@Override</font>
    <b>public int</b> write(<b>byte</b>[] data) {
        stringBuilder.append(<b>new</b> String(data));
        <b>return</b> data.length; <font color="#3f7f5f">// Amount of processed data</font>
    }
});
System.<i>out</i>.println(stringBuilder.toString());
</pre></div><br>
For more information see <a href="http://sevenzipjbind.wiki.sourceforge.net/FirstSteps">wiki page "First Steps"</a> or 
<a href="http://sevenzipjbind.svn.sourceforge.net/viewvc/sevenzipjbind/trunk/SevenZipTest/">JUnit test project on SVN</a>
-->
</table>
</center>
</table>
</html>
